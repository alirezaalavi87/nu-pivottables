{"version":3,"sources":["export_renderers.coffee"],"names":["pivotModule","$","pivotUtilities","export_renderers","TSV Export","pivotData","opts","agg","colKey","colKeys","i","j","k","l","len","len1","len2","len3","len4","len5","m","n","r","result","row","rowAttr","rowAttrs","rowKey","rowKeys","text","extend","localeStrings","getRowKeys","length","push","getColKeys","aggregatorName","join","getAggregator","value","css","width","window","height","exports","module","require","define","amd","jQuery"],"mappings":"AAAA,CAAA,WAAA,IAAkBA,EASH,SAACC,G,OAEZA,EAAEC,eAAeC,iBAAmB,CAAAC,aAAc,SAACC,EAAWC,GAClE,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAcQ,IAZAvB,EAAOL,EAAE6B,OAAO,CAAA,EAAM,GAFX,CAAAC,cAAe,EAAf,EAEyBzB,CAA7B,EAG8B,KADrCsB,EAAUvB,EAAU2B,WAAV,GACiBC,QAA3BL,EAAQM,KAAK,EAAb,EAEqC,KADrCzB,EAAUJ,EAAU8B,WAAV,GACiBF,QAA3BxB,EAAQyB,KAAK,EAAb,EACAR,EAAWrB,EAAUqB,SAGrBH,EAAS,GAETC,EAAM,GACNd,EAAA,EAAAI,EAAAY,EAAAO,OAAAvB,EAAAI,EAAAJ,CAAA,G,OACIc,EAAIU,KAAKT,CAAT,EACJ,GAAqB,IAAlBhB,EAAQwB,QAAqC,IAArBxB,EAAQ,GAAGwB,OAClCT,EAAIU,KAAK7B,EAAU+B,cAAnB,OAEA,IAAAzB,EAAA,EAAAI,EAAAN,EAAAwB,OAAAtB,EAAAI,EAAAJ,CAAA,G,OACIa,EAAIU,KAAK1B,EAAO6B,KAAK,GAAZ,CAAT,EAIR,IAFAd,EAAOW,KAAKV,CAAZ,EAEAZ,EAAA,EAAAI,EAAAY,EAAAK,OAAArB,EAAAI,EAAAJ,CAAA,GAAA,CAEI,IADAY,EAAM,GACNX,EAAA,EAAAI,G,QAAAgB,OAAApB,EAAAI,EAAAJ,CAAA,G,OACIW,EAAIU,KAAKZ,CAAT,EAEJ,IAAAF,EAAA,EAAAF,EAAAT,EAAAwB,OAAAb,EAAAF,EAAAE,CAAA,G,OAEO,OADHb,EAAMF,EAAUiC,cAAcX,EAAQnB,CAAhC,GACH+B,MAAA,EACCf,EAAIU,KAAK3B,EAAIgC,MAAJ,CAAT,EAEAf,EAAIU,KAAK,EAAT,EACRX,EAAOW,KAAKV,CAAZ,CAXJ,CAaA,IADAK,EAAO,GACPR,EAAA,EAAAF,EAAAI,EAAAU,OAAAZ,EAAAF,EAAAE,CAAA,GACIQ,I,QAAUQ,KAAK,IAAP,EAAa,KAEzB,OAAOpC,EAAE,YAAF,EAAgB4B,KAAKA,CAArB,EAA2BW,IAC1B,CAAAC,MAAQxC,EAAEyC,MAAF,EAAUD,MAAV,EAAoB,EAAK,KACjCE,OAAS1C,EAAEyC,MAAF,EAAUC,OAAV,EAAqB,EAAK,IADnC,CADD,CAzCuC,CAAd,CAFzB,EARU,UAAlB,OAAOC,SAAyC,UAAjB,OAAOC,OACrC7C,EAAY8C,QAAQ,QAAR,CAAZ,EACqB,YAAjB,OAAOC,QAAyBA,OAAOC,IAC3CD,OAAO,CAAC,UAAW/C,CAAnB,EAGAA,EAAYiD,MAAZ","file":"export_renderers.min.js","sourcesContent":["callWithJQuery = (pivotModule) ->\n    if typeof exports is \"object\" and typeof module is \"object\" # CommonJS\n        pivotModule require(\"jquery\")\n    else if typeof define is \"function\" and define.amd # AMD\n        define [\"jquery\"], pivotModule\n    # Plain browser env\n    else\n        pivotModule jQuery\n\ncallWithJQuery ($) ->\n\n    $.pivotUtilities.export_renderers = \"TSV Export\": (pivotData, opts) ->\n        defaults = localeStrings: {}\n\n        opts = $.extend(true, {}, defaults, opts)\n\n        rowKeys = pivotData.getRowKeys()\n        rowKeys.push [] if rowKeys.length == 0\n        colKeys = pivotData.getColKeys()\n        colKeys.push [] if colKeys.length == 0\n        rowAttrs = pivotData.rowAttrs\n        colAttrs = pivotData.colAttrs\n\n        result = []\n\n        row = []\n        for rowAttr in rowAttrs\n            row.push rowAttr\n        if colKeys.length == 1 and colKeys[0].length == 0\n            row.push pivotData.aggregatorName\n        else\n            for colKey in colKeys\n                row.push colKey.join(\"-\")\n\n        result.push row\n\n        for rowKey in rowKeys\n            row = []\n            for r in rowKey\n                row.push r\n\n            for colKey in colKeys\n                agg = pivotData.getAggregator(rowKey, colKey)\n                if agg.value()?\n                    row.push agg.value()\n                else\n                    row.push \"\"\n            result.push row\n        text = \"\"\n        for r in result\n            text += r.join(\"\\t\")+\"\\n\"\n\n        return $(\"<textarea>\").text(text).css(\n                width: ($(window).width() / 2) + \"px\",\n                height: ($(window).height() / 2) + \"px\")\n\n"]}