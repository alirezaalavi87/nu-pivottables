!function(){var t=function(E,G){var t=function(D={}){return function(t,e){var r,a,n,o,l,i,s,u,c,h,g,d,p,f,L,N,Q,R,U,b,y,x,v,j,m,z,W,w,k,A,C,S,$,q,B,H,_,F,K,T;if(null==(m=(e=E.extend(!0,{},{localeStrings:{vs:"vs",by:"by"},bb:{}},e)).bb).size&&(m.size={}),null==(m=e.bb.size).width&&(m.width=window.innerWidth),null==(m=e.bb.size).height&&(m.height=window.innerHeight),null==D.type&&(D.type="line"),null==D.horizontal&&(D.horizontal=!1),null==D.stacked&&(D.stacked=!1),0===(k=t.getRowKeys()).length&&k.push([]),0===(o=t.getColKeys()).length&&o.push([]),h=(()=>{for(var t=[],e=0,r=o.length;e<r;e++)c=o[e],t.push(c.join("-"));return t})(),m=0,u=t.aggregatorName,t.valAttrs.length&&(u+=`(${t.valAttrs.join(", ")})`),"scatter"===D.type)for(C={x:{},y:{},t:{}},B=null!=(B=($=t.rowAttrs.concat(t.colAttrs))[0])?B:"",v=null!=(v=$[1])?v:"",$=$.slice(2).join("-"),q=B,""!==v&&(q+=` ${e.localeStrings.vs} `+v),""!==$&&(q+=` ${e.localeStrings.by} `+$),g=0,L=k.length;g<L;g++)for(w=k[g],d=0,N=o.length;d<N;d++)n=o[d],null!=(r=t.getAggregator(w,n)).value()&&(_=w.concat(n),""===(S=_.slice(2).join("-"))&&(S="series"),null==(j=C.x)[S]&&(j[S]=[]),null==(j=C.y)[S]&&(j[S]=[]),T=null!=(j=_[0])?j:0,F=null!=(j=_[1])?j:0,C.y[S].push(T),C.x[S].push(F),null==(_=C.t)[S]&&(_[S]={}),null==(j=C.t[S])[F]&&(j[F]={}),C.t[S][F][T]=r.value());else{for(p=y=0,Q=h.length;p<Q;p++)y+=(F=h[p]).length;for(50<y&&(m=45),l=[],f=0,R=k.length;f<R;f++){for(z=[""===(W=(w=k[f]).join("-"))?u:W],b=0,U=o.length;b<U;b++)n=o[b],H=parseFloat(t.getAggregator(w,n).value()),isFinite(H)?z.push(H):z.push(null);l.push(z)}B=u,$=(D.horizontal?(v=t.rowAttrs.join("-"),t.colAttrs):(v=t.colAttrs.join("-"),t.rowAttrs)).join("-"),q=u,""!==v&&(q+=` ${e.localeStrings.vs} `+v),""!==$&&(q+=` ${e.localeStrings.by} `+$)}if(($=E("<p>",{style:"text-align: center; font-weight: bold"})).attr("dir","auto"),$.text(q),s=t.getAggregator([],[]).format,q={axis:{rotated:D.horizontal,y:{label:B,tick:{}},x:{label:v,tick:{rotate:m,multiline:!1}}},data:{type:D.type,order:null},tooltip:{grouped:!1},color:{pattern:["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"]}},q=E.extend(!0,{},q,e.bb),"scatter"===D.type){for(A in K={},x=0,i=[],C.x)x+=1,K[A]=A+"_x",i.push([A+"_x"].concat(C.x[A])),i.push([A].concat(C.y[A]));q.data.xs=K,q.data.columns=i,q.axis.x.tick={fit:!1},1===x&&(q.legend={show:!1}),q.tooltip.format={title:function(){return u},name:function(){return""},value:function(t,e,r,a,n){return{name:S,value:T,x:F}=n[0],s(C.t[S][F][T])}}}else q.axis.x.type="category",null==(B=q.axis.y.tick).format&&(B.format=function(t){return s(t)}),q.tooltip.format={value:function(t){return s(t)}},D.horizontal?(1===(v=(()=>{for(var t=[],e=0,r=l.length;e<r;e++)a=l[e],t.push(a.shift());return t})()).length&&v[0]===u&&(v=[""]),q.axis.x.categories=v,1===h.length&&""===h[0]&&(h=[u]),l.unshift(h),q.data.rows=l):(q.axis.x.categories=h,q.data.columns=l);return D.stacked&&(D.horizontal?(q.data.groups=[(()=>{for(var t=[],e=0,r=o.length;e<r;e++)F=o[e],t.push(F.join("-"));return t})()],console.log(q.data.groups)):q.data.groups=[(()=>{for(var t=[],e=0,r=k.length;e<r;e++)F=k[e],t.push(F.join("-"));return t})()]),m=E("<div>",{style:"display:none;"}).appendTo(E("body")),e=E("<div>").appendTo(m),q.bindto=e[0],G.generate(q),e.detach(),m.remove(),E("<div>").append($,e)}};return E.pivotUtilities.bb_renderers={"Horizontal Bar Chart":t({type:"bar",horizontal:!0}),"Horizontal Stacked Bar Chart":t({type:"bar",stacked:!0,horizontal:!0}),"Bar Chart":t({type:"bar"}),"Stacked Bar Chart":t({type:"bar",stacked:!0}),"Line Chart":t(),"Area Chart":t({type:"area",stacked:!0}),"Scatter Chart":t({type:"scatter"})}};"object"==typeof exports&&"object"==typeof module?t(require("jquery"),require("bb")):"function"==typeof define&&define.amd?define(["jquery","bb"],t):t(jQuery,bb)}.call(this);
//# sourceMappingURL=bb_renderers.min.js.map
